(this["webpackJsonpreact-shopping-cart"]=this["webpackJsonpreact-shopping-cart"]||[]).push([[0],{58:function(e,t,c){},76:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c(1),s=c.n(n),i=c(20),a=c.n(i),o=c(17),d=c(3),l=c(11),j=function(e){var t=e.children,c=Object(d.f)();return Object(r.jsx)(l.a,{domain:"dev-e24yy2sc.us.auth0.com",clientId:"nQ3uV4YGya5FB1W3t9oxxqvVVrwABB5M",redirectUri:window.location.origin,onRedirectCallback:function(e){c.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},children:t})},u=(c(58),c(4)),h=c(5),b=c(7),O=c(6),p=c(18),x=c(39),m="FETCH_PRODUCTS",f="FILTER_PRODUCTS_BY_SIZE",v="ORDER_PRODUCTS_BY_PRICE",g="ADD_TO_CART",y="REMOVE_FROM_CART",C="CREATE_ORDER",N="CLEAR_ORDER",I="FETCH_ORDERS",_=c(12),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,S=Object(p.e)(Object(p.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(_.a)(Object(_.a)({},e),{},{size:t.payload.size,filteredItems:t.payload.items});case v:return Object(_.a)(Object(_.a)({},e),{},{sort:t.payload.sort,filteredItems:t.payload.items});case m:return Object(_.a)(Object(_.a)({},e),{},{items:t.payload,filteredItems:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:JSON.parse(localStorage.getItem("cartItems")||"[]")},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:case y:return{cartItems:t.payload.cartItems};default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{order:t.payload};case N:return{order:null};case I:return{orders:t.payload};default:return e}}}),{},k(Object(p.a)(x.a))),R=c.p+"static/media/mountain.cec57345.png",E=c(16),T=c(24);function w(e){if(e)return"$"+Number(e.toFixed(1)).toLocaleString()+" "}var P=c(22),A=c.n(P),M=c(25),D=c.n(M),L=c(26),z=c.n(L),q=c.p+"static/media/shoppingCart.7033f674.png",F=function(e){Object(b.a)(c,e);var t=Object(O.a)(c);function c(e){var r;return Object(u.a)(this,c),(r=t.call(this,e)).handleCheckout=function(){r.setState({showCheckout:!0})},r.handleInput=function(e){r.setState(Object(T.a)({},e.target.name,e.target.value.toString()))},r.createOrder=function(e){e.preventDefault();var t={firstName:r.state.firstName,lastName:r.state.lastName,email:r.state.email,address:r.state.address,postalCode:r.state.postalCode,country:r.state.country,cartItems:r.props.cartItems,total:r.props.cartItems.reduce((function(e,t){return e+t.price*t.count}),0)};r.props.createOrder(t)},r.closeModal=function(){r.props.clearOrder()},r.state={showCheckout:!1,firstName:"",lastName:"",address:"",postalCode:"",country:"",email:""},r}return Object(h.a)(c,[{key:"render",value:function(){var e=this,t=this.props,c=t.cartItems,n=t.order;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"cart cart-header",children:[Object(r.jsx)("img",{src:q,alt:"shopping cart"}),Object(r.jsx)("div",{children:"Checkout"})]}),n&&Object(r.jsx)(D.a,{isOpen:!0,onRequestClose:this.closeModal,children:Object(r.jsxs)(z.a,{children:[Object(r.jsx)("button",{className:"close-modal",onClick:this.closeModal,children:"X"}),Object(r.jsxs)("div",{className:"order-details",children:[Object(r.jsx)("h3",{className:"success-message",children:"Your Order Has Been Placed!"}),Object(r.jsxs)("h2",{children:["Order ",n._id]}),Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:"Name:"}),Object(r.jsxs)("div",{children:[n.firstName," ",n.lastName]})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:"Email:"}),Object(r.jsx)("div",{children:n.email})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:"Address:"}),Object(r.jsxs)("div",{children:[n.address," ",Object(r.jsx)("br",{})," ",n.postalCode," ",Object(r.jsx)("br",{})," ",n.country]})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:"Total Cost:"}),Object(r.jsx)("div",{children:w(n.total)})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:"Cart Items:"}),Object(r.jsx)("div",{children:n.cartItems.map((function(e){return Object(r.jsxs)("div",{children:[e.count," ","x"," ",e.title]})}))})]})]})]})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"cart",children:Object(r.jsxs)("ul",{className:"cart-items",children:[Object(r.jsxs)("div",{className:"cart-count",children:[1===c.length?"You have ".concat(c.length," item in your cart"):0===c.length?"Cart is empty":"You have ".concat(c.length," items in your cart")," "]}),c.map((function(t){return Object(r.jsx)(A.a,{left:!0,cascade:!0,children:Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:t.image,alt:t.title})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:t.title}),Object(r.jsxs)("div",{className:"right",children:[w(t.price)," x ",t.count,"  ",Object(r.jsx)("button",{className:"button remove-button",onClick:function(){e.props.removeFromCart(t),1===c.length&&e.setState({showCheckout:!1})},children:"Remove"})]})]})]},t._id)})}))]})}),0!==c.length&&Object(r.jsx)("div",{className:"cart",children:Object(r.jsxs)("div",{className:"total",children:[Object(r.jsxs)("div",{children:["Total:"," ",w(c.reduce((function(e,t){return e+t.price*t.count}),0))]}),Object(r.jsx)("button",{onClick:function(){return e.handleCheckout()},className:"button button-primary",children:"Proceed"})]})}),this.state.showCheckout&&0!==c.length&&Object(r.jsx)(A.a,{right:!0,cascade:!0,children:Object(r.jsx)("div",{className:"cart",children:Object(r.jsx)("form",{onSubmit:this.createOrder,children:Object(r.jsxs)("ul",{className:"form-container",children:[Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{children:"Email"}),Object(r.jsx)("input",{name:"email",type:"email",required:!0,onChange:this.handleInput})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{children:"First Name"}),Object(r.jsx)("input",{name:"firstName",type:"text",required:!0,onChange:this.handleInput})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{children:"Last Name"}),Object(r.jsx)("input",{name:"lastName",type:"text",required:!0,onChange:this.handleInput})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{children:"Shipping Address"}),Object(r.jsx)("input",{name:"address",type:"text",required:!0,onChange:this.handleInput})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{children:"Postal Code"}),Object(r.jsx)("input",{name:"postalCode",type:"text",maxlength:"7",required:!0,onChange:this.handleInput})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{children:"Country"}),Object(r.jsx)("input",{name:"country",type:"text",onChange:this.handleInput,required:!0})]}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{type:"submit",className:"button-primary",children:"Checkout"})})]})})})})]})]})}}]),c}(n.Component),B=Object(E.b)((function(e){return{order:e.order.order,cartItems:e.cart.cartItems}}),{removeFromCart:function(e){return function(t,c){var r=c().cart.cartItems.slice().filter((function(t){return t._id!==e._id}));t({type:y,payload:{cartItems:r}}),localStorage.setItem("cartItems",JSON.stringify(r))}},createOrder:function(e){return function(t){console.log(e),fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t({type:C,payload:e}),t({type:"CLEAR_CART"})}))}},clearOrder:function(){return function(e){e({type:N})}}})(F),H=c(34),J=c.n(H),Y=c(41),U=c(15),V=c.n(U),X=function(e){Object(b.a)(c,e);var t=Object(O.a)(c);function c(){return Object(u.a)(this,c),t.apply(this,arguments)}return Object(h.a)(c,[{key:"render",value:function(){var e=this;return this.props.filteredProducts?Object(r.jsxs)("div",{className:"filter",children:[Object(r.jsxs)("div",{className:"filter-result",children:[this.props.filteredProducts.length," Products"]}),Object(r.jsxs)("div",{className:"filter-sort",children:["Order"," ",Object(r.jsxs)("select",{value:this.props.sort,onChange:function(t){return e.props.sortProducts(e.props.products,t.target.value)},children:[Object(r.jsx)("option",{value:"latest",children:"Latest Inventory"}),Object(r.jsx)("option",{value:"lowest",children:"Price: Lowest to Highest"}),Object(r.jsx)("option",{value:"highest",children:"Price: Highest to Lowest"})]})]})]}):Object(r.jsxs)("div",{className:"loader",children:[" ",Object(r.jsx)(V.a,{size:15,margin:5,color:"green",loading:!0})]})}}]),c}(n.Component),G=Object(E.b)((function(e){return{size:e.products.size,sort:e.products.sort,products:e.products.items,filteredProducts:e.products.filteredItems}}),{filterProducts:function(e,t){return function(c){c({type:f,payload:{size:t,items:""===t?e:e.filter((function(e){return e.availableSizes.indexOf(t)>=0}))}})}},sortProducts:function(e,t){return function(c){var r=e.slice();"latest"===t?r.sort((function(e,t){return e._id>t._id?1:-1})):r.sort((function(e,c){return"lowest"===t?e.price>c.price?1:-1:e.price>c.price?-1:1})),c({type:v,payload:{sort:t,items:r}})}}})(X),W=function(e){Object(b.a)(c,e);var t=Object(O.a)(c);function c(e){var r;return Object(u.a)(this,c),(r=t.call(this,e)).openModal=function(e){r.setState({product:e})},r.closeModal=function(){r.setState({product:null})},r.state={product:null},r}return Object(h.a)(c,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this,t=this.state.product;return Object(r.jsxs)("div",{children:[Object(r.jsx)(A.a,{bottom:!0,cascade:!0,children:this.props.products?Object(r.jsx)("ul",{className:"products",children:this.props.products.map((function(t){return Object(r.jsx)("li",{children:Object(r.jsxs)("div",{className:"product",children:[Object(r.jsxs)("a",{href:"#"+t._id,onClick:function(){return e.openModal(t)},children:[Object(r.jsx)("img",{src:t.image,alt:t.title}),Object(r.jsx)("p",{children:t.title})]}),Object(r.jsxs)("div",{className:"product-price",children:[Object(r.jsx)("div",{children:w(t.price)}),Object(r.jsx)("button",{onClick:function(){return e.props.addToCart(t)},className:"button-primary",children:"Add To Cart"})]})]})},t._id)}))}):Object(r.jsxs)("div",{className:"loader",children:[" ",Object(r.jsx)(V.a,{size:15,margin:5,color:"green",loading:!0})]})}),t&&Object(r.jsx)(D.a,{isOpen:!0,onRequetClose:this.closeModal,children:Object(r.jsxs)(z.a,{children:[Object(r.jsx)("button",{className:"close-modal",onClick:this.closeModal,children:"X"}),Object(r.jsxs)("div",{className:"product-details",children:[Object(r.jsx)("img",{src:t.image,alt:t.title}),Object(r.jsxs)("div",{className:"product-details-description",children:[Object(r.jsx)("p",{children:Object(r.jsx)("h2",{children:t.title})}),Object(r.jsx)("p",{children:t.description}),Object(r.jsxs)("div",{className:"product-price",children:[Object(r.jsx)("div",{children:w(t.price)}),Object(r.jsx)("button",{className:"button-primary product-button",onClick:function(){e.props.addToCart(t),e.closeModal()},children:"Add To Cart"})]})]})]})]})})]})}}]),c}(n.Component),Q=Object(E.b)((function(e){return{products:e.products.filteredItems}}),{fetchProducts:function(){return function(){var e=Object(Y.a)(J.a.mark((function e(t){var c,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/products");case 2:return c=e.sent,e.next=5,c.json();case 5:r=e.sent,t({type:m,payload:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addToCart:function(e){return function(t,c){var r=c().cart.cartItems.slice(),n=!1;r.forEach((function(t){t._id===e._id&&(n=!0,t.count++)})),n||r.push(Object(_.a)(Object(_.a)({},e),{},{count:1})),t({type:g,payload:{cartItems:r}}),localStorage.setItem("cartItems",JSON.stringify(r))}}})(W),Z=function(e){Object(b.a)(c,e);var t=Object(O.a)(c);function c(){return Object(u.a)(this,c),t.apply(this,arguments)}return Object(h.a)(c,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"content",children:[Object(r.jsxs)("div",{className:"main",children:[Object(r.jsx)(G,{}),Object(r.jsx)(Q,{})]}),Object(r.jsx)("div",{className:"sidebar",children:Object(r.jsx)(B,{})})]})}}]),c}(n.Component),$=function(e){Object(b.a)(c,e);var t=Object(O.a)(c);function c(){return Object(u.a)(this,c),t.apply(this,arguments)}return Object(h.a)(c,[{key:"componentDidMount",value:function(){this.props.fetchOrders()}},{key:"render",value:function(){var e=this.props.orders;return e?Object(r.jsxs)("div",{className:"orders",children:[Object(r.jsx)("h2",{children:"Orders"}),Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{}),Object(r.jsx)("th",{children:"ID"}),Object(r.jsx)("th",{children:"DATE "}),Object(r.jsx)("th",{children:"TOTAL"}),Object(r.jsx)("th",{children:"NAME"}),Object(r.jsx)("th",{children:"EMAIL"}),Object(r.jsx)("th",{children:"SHIPPING ADDRESS"}),Object(r.jsx)("th",{children:"ITEMS"})]})}),Object(r.jsx)("tbody",{children:e.map((function(e,t){return Object(r.jsxs)("tr",{children:[Object(r.jsxs)("td",{children:[t+1,"."]}),Object(r.jsx)("td",{children:e._id}),Object(r.jsx)("td",{children:e.createdAt}),Object(r.jsx)("td",{children:w(e.total)}),Object(r.jsxs)("td",{children:[e.firstName," ",e.lastName]}),Object(r.jsx)("td",{children:e.email}),Object(r.jsxs)("td",{children:[e.address,", ",e.postalCode,", ",e.country]}),Object(r.jsx)("td",{children:e.cartItems.map((function(e){return Object(r.jsxs)("div",{children:[e.count," ","x"," ",e.title]})}))})]})}))})]})]}):Object(r.jsxs)("div",{className:"loader",children:[" ",Object(r.jsx)(V.a,{size:15,margin:5,color:"green",loading:!0})]})}}]),c}(n.Component),K=Object(E.b)((function(e){return{orders:e.order.orders}}),{fetchOrders:function(){return function(e){fetch("/api/orders").then((function(e){return e.json()})).then((function(t){e({type:I,payload:t})}))}}})($),ee=function(e){Object(b.a)(c,e);var t=Object(O.a)(c);function c(){return Object(u.a)(this,c),t.apply(this,arguments)}return Object(h.a)(c,[{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsx)(K,{})})}}]),c}(n.Component),te=function(){var e=Object(l.b)().loginWithRedirect;return Object(r.jsx)("button",{onClick:function(){return e()},children:Object(r.jsx)(o.b,{to:"/admin",children:"Admin Login"})})},ce=function(){var e=Object(l.b)().logout;return Object(r.jsx)("button",{className:"btn btn-danger btn-block",onClick:function(){return e({returnTo:window.location.origin})},children:"Log Out"})},re=function(){return Object(l.b)().isAuthenticated?Object(r.jsx)(ce,{}):Object(r.jsx)(te,{})},ne=function(e){Object(b.a)(c,e);var t=Object(O.a)(c);function c(){return Object(u.a)(this,c),t.apply(this,arguments)}return Object(h.a)(c,[{key:"render",value:function(){return Object(r.jsx)(d.a,Object(_.a)({component:Object(l.d)(this.props.component,{onRedirecting:function(){return Object(r.jsxs)("div",{className:"loader",children:[" ",Object(r.jsx)(V.a,{size:15,margin:5,color:"green",loading:!0})]})}})},this.props.args))}}]),c}(s.a.Component),se=function(e){Object(b.a)(c,e);var t=Object(O.a)(c);function c(){return Object(u.a)(this,c),t.apply(this,arguments)}return Object(h.a)(c,[{key:"render",value:function(){return this.props.auth0.isLoading?Object(r.jsxs)("div",{className:"loader",children:[" ",Object(r.jsx)(V.a,{size:15,margin:5,color:"green",loading:!0})]}):Object(r.jsx)(E.a,{store:S,children:Object(r.jsxs)("div",{className:"grid-container",children:[Object(r.jsx)("header",{children:Object(r.jsxs)(o.b,{to:"/",children:[Object(r.jsx)("img",{src:R,alt:"mountain"})," React Mountain Sports"]})}),Object(r.jsx)("main",{children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(ne,{path:"/admin",component:ee}),Object(r.jsx)(d.a,{path:"/",component:Z,exact:!0})]})}),Object(r.jsx)("footer",{children:Object(r.jsx)("div",{children:Object(r.jsx)(re,{children:Object(r.jsx)(o.b,{to:"/admin",children:"Admin "})})})})]})})}}]),c}(s.a.Component),ie=Object(l.c)(se);a.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(o.a,{children:Object(r.jsx)(j,{children:Object(r.jsx)(ie,{})})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.5c24d48e.chunk.js.map